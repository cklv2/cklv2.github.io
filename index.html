<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>K1 Â≠óÊØçÂñÆÂ≠óÂ§ßÂÜíÈö™ üçéüêªüê±</title>
    <style>
        :root {
            --bg-color: #f0f4f8;
            --text-color: #2c3e50;
            --accent-color: #ff6b6b;
            --btn-color: #4cd137;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: var(--bg-color);
            font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            touch-action: none;
        }

        #ui-layer {
            position: absolute;
            top: 20px;
            text-align: center;
            pointer-events: none;
            width: 100%;
            z-index: 10;
        }

        .letter-display {
            font-size: 40px;
            color: #95afc0;
            margin-bottom: 5px;
        }

        .word-display {
            font-size: 64px;
            color: var(--accent-color);
            text-shadow: 3px 3px 0px white;
            margin-bottom: 5px;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #hint {
            font-size: 20px;
            color: #555;
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 25px;
            border-radius: 50px;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        canvas {
            display: block;
            cursor: pointer;
        }

        #controls {
            position: absolute;
            bottom: 30px;
            display: flex;
            gap: 20px;
            z-index: 10;
        }

        .game-btn {
            padding: 15px 30px;
            font-size: 24px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }

        #next-btn {
            background-color: var(--btn-color);
            box-shadow: 0 8px 0 #44bd32;
        }

        #next-btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #44bd32;
        }

        #reset-btn {
            background-color: #718093;
            box-shadow: 0 8px 0 #2f3640;
        }

        #reset-btn:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #2f3640;
        }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div id="letter-title" class="letter-display">Alphabet A</div>
        <div id="word" class="word-display">APPLE</div>
        <div id="hint">Êë∏Êë∏ÁúãÔºÅ (Touch me!)</div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <div id="controls">
        <button id="reset-btn" class="game-btn">ÈáçÊñ∞ÈñãÂßã</button>
        <button id="next-btn" class="game-btn">‰∏ã‰∏ÄÂÄã (NEXT) ‚û°Ô∏è</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const wordEl = document.getElementById('word');
        const letterEl = document.getElementById('letter-title');
        const nextBtn = document.getElementById('next-btn');
        const resetBtn = document.getElementById('reset-btn');

        // A-Z ÂÆåÊï¥Ë≥áÊñôÂ∫´ÔºöÊØèÂÄãÂ≠óÊØçËá≥Â∞ë 3 ÂÄãÂñÆÂ≠óËàáÂ∞çÊáâ Emoji
        const alphabetData = {
            'A': [{w:'APPLE', e:'üçé'}, {w:'ANT', e:'üêú'}, {w:'ARM', e:'üí™'}],
            'B': [{w:'BANANA', e:'üçå'}, {w:'BEAR', e:'üêª'}, {w:'BALL', e:'‚öΩ'}],
            'C': [{w:'CAT', e:'üê±'}, {w:'CAKE', e:'üç∞'}, {w:'CAR', e:'üöó'}],
            'D': [{w:'DOG', e:'üê∂'}, {w:'DUCK', e:'ü¶Ü'}, {w:'DOOR', e:'üö™'}],
            'E': [{w:'EGG', e:'ü•ö'}, {w:'ELEPHANT', e:'üêò'}, {w:'EYE', e:'üëÅÔ∏è'}],
            'F': [{w:'FISH', e:'üêü'}, {w:'FLOWER', e:'üå∏'}, {w:'FROG', e:'üê∏'}],
            'G': [{w:'GRAPE', e:'üçá'}, {w:'GIRAFFE', e:'ü¶í'}, {w:'GHOST', e:'üëª'}],
            'H': [{w:'HAT', e:'üëí'}, {w:'HORSE', e:'üêé'}, {w:'HOUSE', e:'üè†'}],
            'I': [{w:'ICE CREAM', e:'üç¶'}, {w:'IGLOO', e:'üõñ'}, {w:'ISLAND', e:'üèùÔ∏è'}],
            'J': [{w:'JELLY', e:'üçÆ'}, {w:'JUICE', e:'üçπ'}, {w:'JEEP', e:'üöô'}],
            'K': [{w:'KITE', e:'ü™Å'}, {w:'KANGAROO', e:'ü¶ò'}, {w:'KING', e:'üëë'}],
            'L': [{w:'LEMON', e:'üçã'}, {w:'LION', e:'ü¶Å'}, {w:'LEAF', e:'üçÉ'}],
            'M': [{w:'MOON', e:'üåô'}, {w:'MOUSE', e:'üê≠'}, {w:'MONKEY', e:'üêí'}],
            'N': [{w:'NOSE', e:'üëÉ'}, {w:'NEST', e:'ü™π'}, {w:'NET', e:'üï∏Ô∏è'}],
            'O': [{w:'ORANGE', e:'üçä'}, {w:'OWL', e:'ü¶â'}, {w:'OCTOPUS', e:'üêô'}],
            'P': [{w:'PIG', e:'üê∑'}, {w:'PENCIL', e:'‚úèÔ∏è'}, {w:'PIZZA', e:'üçï'}],
            'Q': [{w:'QUEEN', e:'üë∏'}, {w:'QUACK', e:'ü¶Ü'}, {w:'QUESTION', e:'‚ùì'}],
            'R': [{w:'RABBIT', e:'üê∞'}, {w:'RAIN', e:'üåßÔ∏è'}, {w:'ROBOT', e:'ü§ñ'}],
            'S': [{w:'SUN', e:'‚òÄÔ∏è'}, {w:'SNAKE', e:'üêç'}, {w:'STAR', e:'‚≠ê'}],
            'T': [{w:'TIGER', e:'üêØ'}, {w:'TREE', e:'üå≥'}, {w:'TRAIN', e:'üöÇ'}],
            'U': [{w:'UMBRELLA', e:'‚òÇÔ∏è'}, {w:'UP', e:'‚¨ÜÔ∏è'}, {w:'UNICORN', e:'ü¶Ñ'}],
            'V': [{w:'VAN', e:'üöê'}, {w:'VIOLET', e:'üå∏'}, {w:'VOLCANO', e:'üåã'}],
            'W': [{w:'WATER', e:'üíß'}, {w:'WHALE', e:'üêã'}, {w:'WATCH', e:'‚åö'}],
            'X': [{w:'XYLOPHONE', e:'üéπ'}, {w:'X-RAY', e:'ü©ª'}, {w:'XMAS TREE', e:'üéÑ'}],
            'Y': [{w:'YO-YO', e:'ü™Ä'}, {w:'YELLOW', e:'üíõ'}, {w:'YAK', e:'üêÇ'}],
            'Z': [{w:'ZEBRA', e:'ü¶ì'}, {w:'ZERO', e:'0Ô∏è‚É£'}, {w:'ZOO', e:'ü¶í'}]
        };

        const letters = Object.keys(alphabetData);
        let currentLetterIndex = 0;
        let currentItem = null;
        
        let particles = [];
        let fruitScale = 1;
        let targetScale = 1;
        let fruitY = 0;
        let fruitAngle = 0;

        function init() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            fruitY = canvas.height / 2;
            pickRandomItem();
        }

        // ÈÇèËºØÔºöÂæûÁï∂ÂâçÂ≠óÊØçÁöÑÊ∏ÖÂñÆ‰∏≠Èö®Ê©üÈÅ∏‰∏ÄÂÄãÂñÆÂ≠ó
        function pickRandomItem() {
            const possibleItems = alphabetData[letters[currentLetterIndex]];
            const randomIndex = Math.floor(Math.random() * possibleItems.length);
            currentItem = possibleItems[randomIndex];
            updateUI();
        }

        function updateUI() {
            letterEl.innerText = `Letter ${letters[currentLetterIndex]}`;
            wordEl.innerText = currentItem.w;
            wordEl.style.transform = "scale(1.2)";
            setTimeout(() => wordEl.style.transform = "scale(1)", 300);
            targetScale = 0.5; // ÂàáÊèõÊôÇÁöÑÂ∞èÂãïÁï´
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 12 + 4;
                this.speedX = Math.random() * 8 - 4;
                this.speedY = Math.random() * 8 - 4;
                this.color = `hsl(${Math.random() * 360}, 70%, 60%)`;
                this.alpha = 1;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.alpha -= 0.02;
            }
            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function createExplosion(x, y) {
            for (let i = 0; i < 15; i++) {
                particles.push(new Particle(x, y));
            }
        }

        function handleInteraction(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            
            const x = clientX - rect.left;
            const y = clientY - rect.top;

            const dist = Math.sqrt((x - canvas.width / 2) ** 2 + (y - fruitY) ** 2);
            
            // K1 Â∞èÊúãÂèãÂèãÂñÑÂà§ÂÆöÔºö160px Ë∂ÖÂ§ßËß∏Êë∏ÂçÄ
            if (dist < 160) {
                targetScale = 1.4;
                createExplosion(x, y);
                fruitAngle = (Math.random() - 0.5) * 0.4;
                speakWord(currentItem.w);
            }
        }

        function speakWord(text) {
            const msg = new SpeechSynthesisUtterance();
            msg.text = text;
            msg.lang = 'en-US';
            msg.rate = 0.7; // ÈÅ©ÂêàÂ∞èÊúãÂèãÁöÑË™ûÈÄü
            window.speechSynthesis.speak(msg);
        }

        nextBtn.addEventListener('click', () => {
            currentLetterIndex = (currentLetterIndex + 1) % letters.length;
            pickRandomItem();
        });

        resetBtn.addEventListener('click', () => {
            currentLetterIndex = 0;
            pickRandomItem();
        });

        canvas.addEventListener('mousedown', handleInteraction);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleInteraction(e);
        }, {passive: false});

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Áâ©ÁêÜÁ∑©ÂãïÔºöSpring Motion
            fruitScale += (targetScale - fruitScale) * 0.12;
            if (targetScale > 1) targetScale -= 0.03;
            if (targetScale < 1) targetScale += 0.03;

            // Áπ™Ë£ΩÁâ©È´î (Emoji)
            ctx.save();
            ctx.translate(canvas.width / 2, fruitY);
            ctx.rotate(fruitAngle);
            ctx.scale(fruitScale, fruitScale);
            ctx.font = "160px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.globalAlpha = 1;
            if (currentItem) ctx.fillText(currentItem.e, 0, 0);
            ctx.restore();

            // Áπ™Ë£ΩÁ≤íÂ≠êÊïàÊûú
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].alpha <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }

            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', init);
        
        init();
        animate();
    </script>
</body>
</html>
